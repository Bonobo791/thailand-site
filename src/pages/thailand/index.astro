---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import fs from 'node:fs';
import path from 'node:path';

// Get all subdirectories in the thailand directory
const currentDir = 'src/pages/thailand';
const subdirectories = fs
    .readdirSync(currentDir, { withFileTypes: true })
    .filter((dirent) => dirent.isDirectory())
    .map((dirent) => ({
        name: dirent.name,
        path: `/thailand/${dirent.name}`
    }));
---

<Layout title="Thailand">
    <h1>Thailand</h1>

    {
        subdirectories.length > 0 ? (
            <div>
                <h2>Explore Thailand</h2>
                <ul>
                    {subdirectories.map((subdir) => (
                        <li>
                            <a href={subdir.path}>{subdir.name.replace(/-/g, ' ').replace(/\b\w/g, (l) => l.toUpperCase())}</a>
                        </li>
                    ))}
                </ul>
            </div>
        ) : (
            <p>No subcategories found.</p>
        )
    }
</Layout>
